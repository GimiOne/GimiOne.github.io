<!doctype HTML public "-//W3O//DTD W3 HTML 3.0//EN">
<HTML>
<HEAD>
<TITLE>Перевод: Поляков А.В. http://www.avprog.narod.ru</TITLE>
<META name="description" content="Interrupts - 8086 Assembler">
<META name="keywords" content="interrupts, 8086, tutorial, programming, assembler tutorial, tutorial for begginers">
<META name="robots" content="nofollow">
</HEAD><BODY bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#007099" alink="#FF0000">
<TABLE WIDTH=80%>
<TR><TD>
<FONT FACE="Verdana" SIZE=3>
<FONT SIZE=+1>
<B>Уроки Ассемблера 8086 для начинающих (Часть 12)</B>
</FONT><BR><BR>
<FONT SIZE=+2><B>Управление внешними устройствами</B></FONT>
<BR><BR>
<FONT SIZE=1>
Перевод: Поляков А.В. <A HREF="http://www.avprog.narod.ru">http://www.avprog.narod.ru</A>
</FONT><BR><BR><BR>

Эмулятор имеет три встроенных виртуальных устройства: светофор,
шаговый двигатель и робот. Вы можете посмотреть эти устройства, используя
меню эмулятора "<B>Virtual Devices</B>".<BR><BR>

Техническую информацию ищите в разделе <A HREF="io.html"><B>I/O ports</B></A>.<BR><BR>
Как правило, можно использовать любые процессоры семейства х86 для
управления всеми видами устройств, различающихся в основном номерами портов ввода-вывода,
которые могут быть изменены с помощью хитрого электронного оборудования.
Обычно "<B>.bin</B>"-файл записывается микросхему ПЗУ
(Read Only Memory (ROM) - постоянное запоминающее устройство - ПЗУ),
система читает программу из этой микросхемы, загружает программу в ОЗУ и
выполняет программу. Этот принцип используется для многих современных
устройств, таких как микроволновые печи и т.п.<BR><BR>

<HR>
<BR>

<B>Светофор</B><BR><BR>

<IMG SRC="traffic.gif" WIDTH=233 HEIGHT=276>

<BR><BR>
Обычно для управления светофором используется массив (таблица) значений.
В определенный период времени значение читается из массива и отправляется в порт.
Например: <BR><BR>
<TABLE BORDER=1 CELLPADDING=10 WIDTH=70%><TR><TD>
<PRE>
<FONT FACE="Fixedsys">
; директива для создания BIN-файла:
#MAKE_BIN#
#CS=500#
#DS=500#
#SS=500#
#SP=FFFF#
#IP=0#

; пропустить таблицу данных:
JMP start

table DW 100001100001b
      DW 110011110011b
      DW 001100001100b
      DW 011110011110b

start:

MOV SI, 0

; установить счетчик на количество
; элементов в таблице:
MOV CX, 4

next_value:

; получить значение из таблицы:
MOV AX, table[SI]

; установить значение в порт ввода-вывода светофора:
OUT 4, AX

; следующее слово:
ADD SI, 2

CALL PAUSE

LOOP next_value

; начать с другого первого значения
JMP start

; ==========================
PAUSE PROC
; сохранить регистры:
PUSH CX
PUSH DX
PUSH AX

; установить интервал (1 миллион микросекунд - 1 секунда):
MOV     CX, 0Fh
MOV     DX, 4240h
MOV     AH, 86h
INT     15h

; восстановить регистры:
POP AX
POP DX
POP CX
RET
PAUSE ENDP
; ==========================</FONT></PRE>
</TD></TR></TABLE>

<BR><BR>

<HR>

<BR>
<B>Шаговый двигатель</B>
<BR><BR>

<IMG SRC="stepper.gif" WIDTH=237 HEIGHT=215>

<BR><BR>
Двигатель может выполнить "полушаг" при помощи пары магнитов, которые
поворачивают ротор двигателя на определенный угол. Затем включается
следующая пара магнитов и поворачивает ротор двигателя
на следующий "шаг" и т.д.<BR><BR>
Двигатель может выполниь полный шаг, если его повернуть парой магнитов,
затем другой парой магнитов и в конце - одиночным магнитом и т.п.
Лучший способ осуществить полный шаг - это выполнить его как
два полушага.<BR><BR>

Полушаг - это <B>11.25</B> градусов.<BR>
Полный шаг - это <B>22.5</B> градуса.<BR><BR>

Двигатель может вращаться как по часовой стрелке, так и против часовой стрелки.<BR><BR>

См. <A HREF="../Samples/stepper_motor.asm"><B>stepper_motor.asm</B></A>
в каталоге Samples.
<BR><BR>
См. также раздел ссылок Emu8086 <A HREF="io.html"><B>I/O ports</B></A>.<BR><BR>

<BR><BR>

<HR>

<BR>
<B>Робот</B>
<BR><BR>

<IMG SRC="robot.gif" WIDTH=530 HEIGHT=352>

<BR><BR>
Полный список набора команд для робота приведен в разделе
<A HREF="io.html"><B>I/O ports</B></A>.<BR><BR>

Для управления роботом должен быть использован набор алгоритмов
для достижения максимальной эффективности. Самым простым, но очень неэффективным
является алгоритм случайных перемещений (см. <A HREF="../Samples/robot.asm"><B>robot.asm</B></A> в каталоге Samples).

<BR><BR>
Можно также использовать таблицу данных (как и в светофоре).
Это может быть хорошо, если робот всегда работает в одной и той же среде.
<BR><BR>

<BR><BR><BR>

<HR>
<CENTER>
<A HREF="asm_tutorial_11.html"><B> &lt;&lt;&lt; Предыдущая часть &lt;&lt;&lt; </B></A>
&nbsp;&nbsp;&nbsp;&nbsp;
<A HREF="asm_tutorial_13.html"><B> >>> Следующая часть >>> </B></A>
</CENTER>
<HR>



<BR>

</FONT>



</TD></TR>
</TABLE>


</BODY>

</HTML>
